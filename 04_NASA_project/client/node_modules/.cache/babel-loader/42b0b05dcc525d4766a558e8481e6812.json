{"ast":null,"code":"import _asyncToGenerator from\"/Users/memphisdiangelis/Desktop/Udemy/CompleteNodeJSDev2002/04_NASA_project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/memphisdiangelis/Desktop/Udemy/CompleteNodeJSDev2002/04_NASA_project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/memphisdiangelis/Desktop/Udemy/CompleteNodeJSDev2002/04_NASA_project/client/node_modules/@babel/runtime/regenerator/index.js\";import{useCallback,useEffect,useState}from'react';import{httpGetLaunches,httpSubmitLaunch,httpAbortLaunch}from'./requests';function useLaunches(onSuccessSound,onAbortSound,onFailureSound){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),launches=_useState2[0],saveLaunches=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isPendingLaunch=_useState4[0],setPendingLaunch=_useState4[1];var getLaunches=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var fetchedLaunches;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return httpGetLaunches();case 2:fetchedLaunches=_context.sent;saveLaunches(fetchedLaunches);case 4:case\"end\":return _context.stop();}}},_callee);})),[]);useEffect(function(){getLaunches();},[getLaunches]);var submitLaunch=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var data,launchDate,mission,rocket,target,response,success;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();setPendingLaunch(true);data=new FormData(e.target);launchDate=new Date(data.get('launch-day'));mission=data.get('mission-name');rocket=data.get('rocket-name');target=data.get('planets-selector');_context2.next=9;return httpSubmitLaunch({launchDate:launchDate,mission:mission,rocket:rocket,target:target});case 9:response=_context2.sent;// TODO: Set success based on response.\nsuccess=response.ok;if(success){getLaunches();setTimeout(function(){setPendingLaunch(false);onSuccessSound();},800);}else{onFailureSound();}case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}(),[getLaunches,onSuccessSound,onFailureSound]);var abortLaunch=useCallback(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var response,success;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return httpAbortLaunch(id);case 2:response=_context3.sent;// TODO: Set success based on response.\nsuccess=response.ok;if(success){getLaunches();onAbortSound();}else{onFailureSound();}case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}(),[getLaunches,onAbortSound,onFailureSound]);return{launches:launches,isPendingLaunch:isPendingLaunch,submitLaunch:submitLaunch,abortLaunch:abortLaunch};}export default useLaunches;","map":{"version":3,"names":["useCallback","useEffect","useState","httpGetLaunches","httpSubmitLaunch","httpAbortLaunch","useLaunches","onSuccessSound","onAbortSound","onFailureSound","launches","saveLaunches","isPendingLaunch","setPendingLaunch","getLaunches","fetchedLaunches","submitLaunch","e","preventDefault","data","FormData","target","launchDate","Date","get","mission","rocket","response","success","ok","setTimeout","abortLaunch","id"],"sources":["/Users/memphisdiangelis/Desktop/Udemy/CompleteNodeJSDev2002/04_NASA_project/client/src/hooks/useLaunches.js"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\n\nimport { httpGetLaunches, httpSubmitLaunch, httpAbortLaunch } from './requests';\n\nfunction useLaunches(onSuccessSound, onAbortSound, onFailureSound) {\n\tconst [launches, saveLaunches] = useState([]);\n\tconst [isPendingLaunch, setPendingLaunch] = useState(false);\n\n\tconst getLaunches = useCallback(async () => {\n\t\tconst fetchedLaunches = await httpGetLaunches();\n\t\tsaveLaunches(fetchedLaunches);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tgetLaunches();\n\t}, [getLaunches]);\n\n\tconst submitLaunch = useCallback(\n\t\tasync (e) => {\n\t\t\te.preventDefault();\n\t\t\tsetPendingLaunch(true);\n\t\t\tconst data = new FormData(e.target);\n\t\t\tconst launchDate = new Date(data.get('launch-day'));\n\t\t\tconst mission = data.get('mission-name');\n\t\t\tconst rocket = data.get('rocket-name');\n\t\t\tconst target = data.get('planets-selector');\n\t\t\tconst response = await httpSubmitLaunch({\n\t\t\t\tlaunchDate,\n\t\t\t\tmission,\n\t\t\t\trocket,\n\t\t\t\ttarget,\n\t\t\t});\n\n\t\t\t// TODO: Set success based on response.\n\t\t\tconst success = response.ok;\n\t\t\tif (success) {\n\t\t\t\tgetLaunches();\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetPendingLaunch(false);\n\t\t\t\t\tonSuccessSound();\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tonFailureSound();\n\t\t\t}\n\t\t},\n\t\t[getLaunches, onSuccessSound, onFailureSound]\n\t);\n\n\tconst abortLaunch = useCallback(\n\t\tasync (id) => {\n\t\t\tconst response = await httpAbortLaunch(id);\n\n\t\t\t// TODO: Set success based on response.\n\t\t\tconst success = response.ok;\n\t\t\tif (success) {\n\t\t\t\tgetLaunches();\n\t\t\t\tonAbortSound();\n\t\t\t} else {\n\t\t\t\tonFailureSound();\n\t\t\t}\n\t\t},\n\t\t[getLaunches, onAbortSound, onFailureSound]\n\t);\n\n\treturn {\n\t\tlaunches,\n\t\tisPendingLaunch,\n\t\tsubmitLaunch,\n\t\tabortLaunch,\n\t};\n}\n\nexport default useLaunches;\n"],"mappings":"2fAAA,OAASA,WAAT,CAAsBC,SAAtB,CAAiCC,QAAjC,KAAiD,OAAjD,CAEA,OAASC,eAAT,CAA0BC,gBAA1B,CAA4CC,eAA5C,KAAmE,YAAnE,CAEA,QAASC,CAAAA,WAAT,CAAqBC,cAArB,CAAqCC,YAArC,CAAmDC,cAAnD,CAAmE,CAClE,cAAiCP,QAAQ,CAAC,EAAD,CAAzC,wCAAOQ,QAAP,eAAiBC,YAAjB,eACA,eAA4CT,QAAQ,CAAC,KAAD,CAApD,yCAAOU,eAAP,eAAwBC,gBAAxB,eAEA,GAAMC,CAAAA,WAAW,CAAGd,WAAW,sEAAC,6KACDG,CAAAA,eAAe,EADd,QACzBY,eADyB,eAE/BJ,YAAY,CAACI,eAAD,CAAZ,CAF+B,sDAAD,GAG5B,EAH4B,CAA/B,CAKAd,SAAS,CAAC,UAAM,CACfa,WAAW,GACX,CAFQ,CAEN,CAACA,WAAD,CAFM,CAAT,CAIA,GAAME,CAAAA,YAAY,CAAGhB,WAAW,2FAC/B,kBAAOiB,CAAP,iLACCA,CAAC,CAACC,cAAF,GACAL,gBAAgB,CAAC,IAAD,CAAhB,CACMM,IAHP,CAGc,GAAIC,CAAAA,QAAJ,CAAaH,CAAC,CAACI,MAAf,CAHd,CAIOC,UAJP,CAIoB,GAAIC,CAAAA,IAAJ,CAASJ,IAAI,CAACK,GAAL,CAAS,YAAT,CAAT,CAJpB,CAKOC,OALP,CAKiBN,IAAI,CAACK,GAAL,CAAS,cAAT,CALjB,CAMOE,MANP,CAMgBP,IAAI,CAACK,GAAL,CAAS,aAAT,CANhB,CAOOH,MAPP,CAOgBF,IAAI,CAACK,GAAL,CAAS,kBAAT,CAPhB,wBAQwBpB,CAAAA,gBAAgB,CAAC,CACvCkB,UAAU,CAAVA,UADuC,CAEvCG,OAAO,CAAPA,OAFuC,CAGvCC,MAAM,CAANA,MAHuC,CAIvCL,MAAM,CAANA,MAJuC,CAAD,CARxC,QAQOM,QARP,gBAeC;AACMC,OAhBP,CAgBiBD,QAAQ,CAACE,EAhB1B,CAiBC,GAAID,OAAJ,CAAa,CACZd,WAAW,GACXgB,UAAU,CAAC,UAAM,CAChBjB,gBAAgB,CAAC,KAAD,CAAhB,CACAN,cAAc,GACd,CAHS,CAGP,GAHO,CAAV,CAIA,CAND,IAMO,CACNE,cAAc,GACd,CAzBF,yDAD+B,gEA4B/B,CAACK,WAAD,CAAcP,cAAd,CAA8BE,cAA9B,CA5B+B,CAAhC,CA+BA,GAAMsB,CAAAA,WAAW,CAAG/B,WAAW,2FAC9B,kBAAOgC,EAAP,kKACwB3B,CAAAA,eAAe,CAAC2B,EAAD,CADvC,QACOL,QADP,gBAGC;AACMC,OAJP,CAIiBD,QAAQ,CAACE,EAJ1B,CAKC,GAAID,OAAJ,CAAa,CACZd,WAAW,GACXN,YAAY,GACZ,CAHD,IAGO,CACNC,cAAc,GACd,CAVF,wDAD8B,iEAa9B,CAACK,WAAD,CAAcN,YAAd,CAA4BC,cAA5B,CAb8B,CAA/B,CAgBA,MAAO,CACNC,QAAQ,CAARA,QADM,CAENE,eAAe,CAAfA,eAFM,CAGNI,YAAY,CAAZA,YAHM,CAINe,WAAW,CAAXA,WAJM,CAAP,CAMA,CAED,cAAezB,CAAAA,WAAf"},"metadata":{},"sourceType":"module"}